default-lease-time 3600;
max-lease-time 7200;
authoritative;
option space pxelinux;
option pxelinux.magic code 208 = string;
option pxelinux.configfile code 209 = text;
option pxelinux.pathprefix code 210 = text;
option pxelinux.reboottime code 211 = unsigned integer 32;
option architecture-type code 93 = unsigned integer 16;

class "pxeclients" {
        match if substring (option vendor-class-identifier, 0, 9) = "PXEClient";
        # PXE servers hostname or IP address
        next-server {{ ansible_env.dnsbinder_server_fqdn }};

        if option architecture-type = 00:07 {
            filename "grubx64.efi";
        }
        else {
            filename "pxelinux.0";
        }
}

subnet {{ ansible_env.dnsbinder_first24_subnet }}.0 netmask {{ ansible_env.dnsbinder_netmask }} {
    range dynamic-bootp {{ ansible_env.dnsbinder_last24_subnet }}.0 {{ ansible_env.dnsbinder_last24_subnet }}.254;
    option broadcast-address {{ ansible_env.dnsbinder_broadcast }};
    option routers {{ ansible_env.dnsbinder_gateway }};
    option domain-name-servers {{ ansible_env.dnsbinder_server_ipv4_address }};
    option domain-name "{{ ansible_env.dnsbinder_domain }}";
    option domain-search "{{ ansible_env.dnsbinder_domain }}";
}
